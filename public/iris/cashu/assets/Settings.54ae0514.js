import{d as ge,a as he,i as s,j as c,Q as u,l as D,k as le}from"./selection.05db5733.js";import{r as ae,E as b,k as x,ax as ke,a7 as ve,I as we,aw as Ce,e as _e,a_ as E,A as ne,B as be,Q as _,j as Z,at as R,av as P,_ as X,U as Q,K as r,L as f,M as e,$ as g,O as t,S as n,W as p,G as Ne,R as y,au as T,V as S,Y as K,Z as M,T as A}from"./index.f0702a55.js";import{y as Se,R as qe,N as z,D as Pe,E as Ve,F as Te,B as $e,G as Ie,P as xe,g as De,O,H as oe,I as Y,J as F,Q as Ee,b as w}from"./P2PKDialog.3c245219.js";import{i as Ke}from"./vue-qrcode.esm.ae118260.js";import{g as Re,c as We,h as G,b as H,e as J,i as Me,q as Ae}from"./token.aedbecc1.js";import"./scroll.effc5c98.js";import"./format.054b8074.js";function Be(l,o){const a=ae(null),v=b(()=>l.disable===!0?null:x("span",{ref:a,class:"no-outline",tabindex:-1}));function h(k){const d=o.value;k!==void 0&&k.type.indexOf("key")===0?d!==null&&document.activeElement!==d&&d.contains(document.activeElement)===!0&&d.focus():a.value!==null&&(k===void 0||d!==null&&d.contains(k.target)===!0)&&a.value.focus()}return{refocusTargetEl:v,refocusTarget:h}}var Qe={xs:30,sm:35,md:40,lg:50,xl:60};const ze={...he,...Ce,...Se,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:l=>l==="tf"||l==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Ue=["update:modelValue"];function Le(l,o){const{props:a,slots:v,emit:h,proxy:k}=_e(),{$q:d}=k,V=ge(a,d),N=ae(null),{refocusTargetEl:i,refocusTarget:C}=Be(a,N),W=ke(a,Qe),$=b(()=>a.val!==void 0&&Array.isArray(a.modelValue)),U=b(()=>{const m=E(a.val);return $.value===!0?a.modelValue.findIndex(I=>E(I)===m):-1}),q=b(()=>$.value===!0?U.value!==-1:E(a.modelValue)===E(a.trueValue)),L=b(()=>$.value===!0?U.value===-1:E(a.modelValue)===E(a.falseValue)),ee=b(()=>q.value===!1&&L.value===!1),ie=b(()=>a.disable===!0?-1:a.tabindex||0),se=b(()=>`q-${l} cursor-pointer no-outline row inline no-wrap items-center`+(a.disable===!0?" disabled":"")+(V.value===!0?` q-${l}--dark`:"")+(a.dense===!0?` q-${l}--dense`:"")+(a.leftLabel===!0?" reverse":"")),re=b(()=>{const m=q.value===!0?"truthy":L.value===!0?"falsy":"indet",I=a.color!==void 0&&(a.keepColor===!0||(l==="toggle"?q.value===!0:L.value!==!0))?` text-${a.color}`:"";return`q-${l}__inner relative-position non-selectable q-${l}__inner--${m}${I}`}),ue=b(()=>{const m={type:"checkbox"};return a.name!==void 0&&Object.assign(m,{".checked":q.value,"^checked":q.value===!0?"checked":void 0,name:a.name,value:$.value===!0?a.val:a.trueValue}),m}),de=qe(ue),ce=b(()=>{const m={tabindex:ie.value,role:l==="toggle"?"switch":"checkbox","aria-label":a.label,"aria-checked":ee.value===!0?"mixed":q.value===!0?"true":"false"};return a.disable===!0&&(m["aria-disabled"]="true"),m});function j(m){m!==void 0&&(ne(m),C(m)),a.disable!==!0&&h("update:modelValue",fe(),m)}function fe(){if($.value===!0){if(q.value===!0){const m=a.modelValue.slice();return m.splice(U.value,1),m}return a.modelValue.concat([a.val])}if(q.value===!0){if(a.toggleOrder!=="ft"||a.toggleIndeterminate===!1)return a.falseValue}else if(L.value===!0){if(a.toggleOrder==="ft"||a.toggleIndeterminate===!1)return a.trueValue}else return a.toggleOrder!=="ft"?a.trueValue:a.falseValue;return a.indeterminateValue}function me(m){(m.keyCode===13||m.keyCode===32)&&ne(m)}function pe(m){(m.keyCode===13||m.keyCode===32)&&j(m)}const ye=o(q,ee);return Object.assign(k,{toggle:j}),()=>{const m=ye();a.disable!==!0&&de(m,"unshift",` q-${l}__native absolute q-ma-none q-pa-none`);const I=[x("div",{class:re.value,style:W.value,"aria-hidden":"true"},m)];i.value!==null&&I.push(i.value);const te=a.label!==void 0?ve(v.default,[a.label]):we(v.default);return te!==void 0&&I.push(x("div",{class:`q-${l}__label q-anchor--skip`},te)),x("div",{ref:N,class:se.value,...ce.value,onClick:j,onKeydown:me,onKeyup:pe},I)}}var B=be({name:"QToggle",props:{...ze,icon:String,iconColor:String},emits:Ue,setup(l){function o(a,v){const h=b(()=>(a.value===!0?l.checkedIcon:v.value===!0?l.indeterminateIcon:l.uncheckedIcon)||l.icon),k=b(()=>a.value===!0?l.iconColor:null);return()=>[x("div",{class:"q-toggle__track"}),x("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},h.value!==void 0?[x(_,{name:h.value,color:k.value})]:void 0)]}return Le("toggle",o)}});const Oe=Z({name:"NWCDialog",mixins:[windowMixin],components:{VueQrcode:Ke},data:function(){return{}},computed:{...R(z,["showNWCData"]),...P(z,["showNWCDialog"])},methods:{}}),Ye={class:"text-center q-mb-md q-mt-none q-pt-none"},je=["href"],Fe={class:"row justify-center"},Ge={class:"row justify-center"},He={class:"row justify-center q-pt-md"},Je={class:"row q-mt-lg"};function Ze(l,o,a,v,h,k){const d=Q("vue-qrcode");return r(),f($e,{modelValue:l.showNWCDialog,"onUpdate:modelValue":o[1]||(o[1]=V=>l.showNWCDialog=V),position:"top","backdrop-filter":"blur(2px) brightness(60%)"},{default:e(()=>[l.showNWCData.connectionString?(r(),f(Pe,{key:0,class:"q-px-lg q-pt-md q-pb-md qcard"},{default:e(()=>[g("div",Ye,[g("a",{href:l.showNWCData.connectionString},[t(Ve,{ratio:1,class:"q-mx-md q-mt-none q-pt-none"},{default:e(()=>[t(d,{value:l.showNWCData.connectionString,options:{width:340},class:"rounded-borders"},null,8,["value"])]),_:1})],8,je),g("div",Fe,[t(Te,{class:"q-pa-sm"},{default:e(()=>[g("div",Ge,[t(s,{overline:"",class:"q-mb-sm q-pt-md text-white",style:{"font-size":"14px"}},{default:e(()=>[n(" Nostr Wallet Connect")]),_:1})]),g("div",He,[t(s,{caption:"",class:"text-weight-light text-white",style:{"font-size":"12px"}},{default:e(()=>[n(" Control your wallet remotely with NWC. Press the QR code to link your wallet with a compatible app. ")]),_:1}),t(s,{caption:"",class:"text-weight-bold text-white q-pt-md"},{default:e(()=>[n(" Warning: anyone with access to this connection string can initiate payments from your wallet. Do not share! ")]),_:1})])]),_:1})]),g("div",Je,[t(p,{class:"q-mx-xs",size:"md",flat:"",onClick:o[0]||(o[0]=V=>l.copyText(l.showNWCData.connectionString))},{default:e(()=>[n("Copy")]),_:1}),Ne((r(),f(p,{flat:"",color:"grey",class:"q-ml-auto"},{default:e(()=>[n("Close")]),_:1})),[[Ie]])])])]),_:1})):y("",!0)]),_:1},8,["modelValue"])}var Xe=X(Oe,[["render",Ze]]);const et=Z({name:"SettingsView",mixins:[windowMixin],components:{P2PKDialog:xe,NWCDialog:Xe},props:{},data:function(){return{themes:["monochrome","classic","bitcoin","mint","autumn","salvador","freedom","cyber","flamingo"],discoveringMints:!1,hideMnemonic:!0,confirmMnemonic:!1,confirmNuke:!1,nip46Token:"",nip07SignerAvailable:!1,newRelay:""}},computed:{...P(We,["getBitcoinPrice","checkSentTokens"]),...R(G,["p2pkKeys"]),...P(G,["showP2PKDialog"]),...P(z,["showNWCDialog","showNWCData"]),...R(H,["activeMintUrl","mints","activeProofs","proofs"]),...R(O,["npcLoading"]),...R(oe,["pubkey","mintRecommendations","signerType","seedSignerPrivateKeyNsec"]),...R(J,["mnemonic"]),...P(O,["npcAddress"]),...P(O,["npcEnabled","automaticClaim"]),...P(J,["keysetCounters"]),...P(H,["addMintData","showAddMintDialog","showRemoveMintDialog"]),...P(z,["nwcEnabled","connections","relays"]),keysetCountersByMint(){const l=this.mints,o={};for(let a of l){const v=a.keysets.map(k=>k.id),h=this.keysetCounters.filter(k=>v.includes(k.id));o[a.url]=h}return o},hiddenMnemonic(){return this.hideMnemonic?this.mnemonic.split(" ").map(l=>"*".repeat(l.length)).join(" "):this.mnemonic},enableNwc:{get(){return this.nwcEnabled},set(l){this.nwcEnabled=l}}},watch:{enableNwc:function(){this.enableNwc?this.listenToNWCCommands():this.unsubscribeNWC()},npcEnabled:async function(){this.npcEnabled?(await this.initSigner(),await this.generateNPCConnection()):this.npcAddress=""}},methods:{...T(oe,["init","initNip07Signer","initNip46Signer","initPrivateKeySigner","initWalletSeedPrivateKeySigner","checkNip07Signer","resetPrivateKeySigner","resetNip46Signer","initSigner"]),...T(z,["generateNWCConnection","listenToNWCCommands","unsubscribeNWC","getConnectionString"]),...T(G,["generateKeypair","showKeyDetails"]),...T(H,["addMint","removeMint","activateMintUrl","updateMint","restoreFromBackup"]),...T(J,["newMnemonic","decodeRequest","checkProofsSpendable","melt","requestMint","increaseKeysetCounter"]),...T(Me,["invoiceCheckWorker"]),...T(Ae,["serializeProofs"]),...T(O,["generateNPCConnection"]),generateNewMnemonic:async function(){this.newMnemonic(),await this.initSigner(),await this.generateNPCConnection()},shortUrl:function(l){return De(l)},toggleMnemonicVisibility:function(){this.hideMnemonic=!this.hideMnemonic},enable_terminal:function(){var l=document.createElement("script");l.src="//cdn.jsdelivr.net/npm/eruda",document.body.appendChild(l),l.onload=function(){eruda.init()}},getLocalstorageToFile:async function(){const l=`cashu_backup_${Re()}.json`;for(var o={},a=0;a<localStorage.length;a++){var v=localStorage.key(a),h=localStorage.getItem(v);o[v]=h}var k=JSON.stringify(o),d=new Blob([k],{type:"text/plain"}),V=window.URL.createObjectURL(d),N=document.createElement("a");N.download=l,N.innerHTML="Download File",N.href=V,N.onclick=function(){document.body.removeChild(event.target)},N.style.display="none",document.body.appendChild(N),N.click()},unsetAllReservedProofs:async function(){for(let l of this.proofs)l.reserved=!1;this.notifySuccess("No reserved proofs left")},toggleGetBitcoinPrice:function(){this.getBitcoinPrice=!this.getBitcoinPrice},checkActiveProofsSpendable:async function(){let l=this.activeProofs.flat();console.log("Checking proofs",l);let o=[],a=50;for(let h=0;h<l.length;h+=a){console.log("Checking proofs",h,h+a);let k=l.slice(h,h+a),d=await this.checkProofsSpendable(k,!0);o.push(d)}let v=o.flat();v.length>0?(console.log("Spent proofs",v),this.notifySuccess("Removed "+v.length+" spent proofs")):this.notifySuccess("No spent proofs found")},showP2PKKeyEntry:async function(l){this.showKeyDetails(l),this.showP2PKDialog=!0},showNWCEntry:async function(l){this.showNWCData={connection:l,connectionString:this.getConnectionString(l)},this.showNWCDialog=!0},exportActiveProofs:async function(){const l=await this.serializeProofs(this.activeProofs);this.copyText(l)},handleSeedClick:async function(){await this.initWalletSeedPrivateKeySigner(),await this.generateNPCConnection()},handleExtensionClick:async function(){await this.initNip07Signer(),await this.generateNPCConnection()},handleBunkerClick:async function(){await this.initNip46Signer(),await this.generateNPCConnection()},handleNsecClick:async function(){await this.initPrivateKeySigner(),await this.generateNPCConnection()},handleResetPrivateKeySigner:async function(){await this.resetPrivateKeySigner(),await this.generateNPCConnection()},handleResetNip46Signer:async function(){await this.resetNip46Signer(),await this.generateNPCConnection()},nukeWallet:async function(){await this.getLocalstorageToFile(),localStorage.clear(),this.$router.push("/"),this.$emit("close")},addRelay:function(){this.newRelay&&(this.newRelay=this.newRelay.trim(),this.relays.includes(this.newRelay)?this.notifyWarning("Relay already added"):(this.relays.push(this.newRelay),this.newRelay=""))},removeRelay:function(l){this.relays=this.relays.filter(o=>o!==l)}},created:async function(){this.nip07SignerAvailable=await this.checkNip07Signer(),console.log("Nip07 signer available",this.nip07SignerAvailable)}}),tt={style:{"max-width":"800px",margin:"0 auto"}},lt={class:"q-px-xs text-left","on-left":""},nt=g("a",{href:"https://v2alpha.nutstash.app/",target:"_blank"},"this tool",-1),ot={class:"row q-pt-md"},at={class:"col-12"},it={class:"q-py-sm q-px-xs text-left","on-left":""},st={class:"q-py-sm q-px-xs text-left","on-left":""},rt={class:"row q-pt-md"},ut={key:0,class:"row q-pt-md"},dt={class:"col-12"},ct={class:"row q-pt-md"},ft={key:0,class:"q-py-sm q-px-md text-left","on-left":""},mt={key:2},pt={class:"q-py-sm q-px-xs text-left","on-left":""},yt={class:"q-py-mb q-px-xs text-left","on-left":""},gt={class:"row q-pt-md"},ht={class:"row q-pt-md"},kt={key:0,class:"col-12"},vt={key:1,class:"col-12"},wt=g("span",null,"Are you sure you want to generate a new seed phrase? ",-1),Ct=g("span",null,"Are you sure you want to delete your wallet data?",-1);function _t(l,o,a,v,h,k){const d=Q("row"),V=Q("P2PKDialog"),N=Q("NWCDialog");return r(),S(K,null,[g("div",tt,[g("div",lt,[t(D,{padding:""},{default:e(()=>[t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:"",class:"text-weight-bold"},{default:e(()=>[n("Backup seed phrase")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Your seed phrase can restore your wallet. Keep it safe and private. Warning: this wallet does not support seed phrase recovery yet. Use a different Cashu wallet or "),nt,n(" to recover from seed phrase. ")]),_:1}),g("div",ot,[g("div",at,[t(Y,{outlined:"",readonly:"",modelValue:l.hiddenMnemonic,"onUpdate:modelValue":o[1]||(o[1]=i=>l.hiddenMnemonic=i),label:"Seed phrase",autogrow:""},{append:e(()=>[t(p,{flat:"",dense:"",icon:"visibility",color:"primary",class:"cursor-pointer q-mt-md",onClick:l.toggleMnemonicVisibility},null,8,["onClick"]),t(p,{flat:"",dense:"",icon:"content_copy",color:"primary",class:"cursor-pointer q-mt-md",onClick:o[0]||(o[0]=i=>l.copyText(l.mnemonic))})]),_:1},8,["modelValue"])])])]),_:1})]),_:1})]),_:1})]),g("div",it,[t(D,{padding:""},{default:e(()=>[t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:"",class:"text-weight-bold"},{default:e(()=>[n("P2PK")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Generate a key pair to receive P2PK-locked ecash. Warning: This feature is experimental. Only use with small amounts. If you lose your private keys, nobody will be able to unlock the ecash locked to it anymore.")]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(p,{class:"q-ml-sm q-px-md",color:"primary",size:"sm",rounded:"",outline:"",onClick:l.generateKeypair},{default:e(()=>[n("Generate key")]),_:1},8,["onClick"])]),_:1})]),_:1})]),l.p2pkKeys.length?(r(),f(F,{key:0,dense:"","dense-toggle":"",class:"text-left",label:`Click to browse ${l.p2pkKeys.length} keys`},{default:e(()=>[(r(!0),S(K,null,M(l.p2pkKeys,i=>(r(),f(c,{key:i.privakey},{default:e(()=>[t(u,{class:"q-mx-none q-pl-none",style:{"max-width":"1.05em"}},{default:e(()=>[t(_,{name:"content_copy",onClick:C=>l.copyText(i.publicKey),size:"1.2em",color:"grey",class:"q-mr-xs cursor-pointer"},null,8,["onClick"])]),_:2},1024),t(u,null,{default:e(()=>[t(s,{caption:"",clickable:"",style:{"word-break":"break-word","font-size":"0.65rem"},class:"q-mx-sm",onClick:C=>l.showP2PKKeyEntry(i.publicKey)},{default:e(()=>[n(A(i.publicKey),1)]),_:2},1032,["onClick"])]),_:2},1024),t(u,{side:""},{default:e(()=>[i.used?(r(),f(le,{key:0,label:"used",color:"primary",class:"q-mr-sm"})):y("",!0)]),_:2},1024),t(u,{class:"q-mx-none q-pl-none",style:{"max-width":"1.05em"}},{default:e(()=>[t(_,{name:"qr_code",onClick:C=>l.showP2PKKeyEntry(i.publicKey),size:"1em",color:"grey",class:"q-mr-xs cursor-pointer"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label"])):y("",!0),g("div",st,[t(D,{padding:""},{default:e(()=>[t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:"",class:"text-weight-bold"},{default:e(()=>[n("Lightning address")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Receive payments to your Lightning address.")]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,{class:"q-mx-none q-pl-none"},{default:e(()=>[g("div",rt,[t(B,{modelValue:l.npcEnabled,"onUpdate:modelValue":o[2]||(o[2]=i=>l.npcEnabled=i),color:"primary"},null,8,["modelValue"]),t(u,null,{default:e(()=>[t(s,{overline:""},{default:e(()=>[n("Enable")]),_:1}),t(s,{caption:""},{default:e(()=>[n(" Your wallet will check for incoming payments at every startup. ")]),_:1})]),_:1})]),l.npcEnabled?(r(),S("div",ut,[g("div",dt,[t(Y,{outlined:"",modelValue:l.npcAddress,"onUpdate:modelValue":o[4]||(o[4]=i=>l.npcAddress=i),dense:"",rounded:"",readonly:""},{append:e(()=>[l.npcLoading?(r(),f(Ee,{key:0,size:"sm"})):y("",!0),t(_,{name:"content_copy",onClick:o[3]||(o[3]=i=>l.copyText(l.npcAddress)),size:"0.8em",color:"grey",class:"q-mr-sm cursor-pointer"},{default:e(()=>[t(w,null,{default:e(()=>[n("Copy Lightning address")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),g("div",ct,[t(B,{modelValue:l.automaticClaim,"onUpdate:modelValue":o[5]||(o[5]=i=>l.automaticClaim=i),color:"primary"},null,8,["modelValue"]),t(u,null,{default:e(()=>[t(s,{overline:""},{default:e(()=>[n("Claim automatically")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Receive incoming payments automatically. ")]),_:1})]),_:1})])])):y("",!0)]),_:1})]),_:1}),l.npcEnabled?(r(),S("div",ft,[t(D,{padding:""},{default:e(()=>[t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:""},{default:e(()=>[n("Your nostr keys")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Link your wallet to a nostr account to generate your Lightning address. You can only receive payments to one address at a time.")]),_:1})]),_:1})]),_:1}),t(c,{active:l.signerType==="SEED","active-class":"text-weight-bold text-primary",clickable:""},{default:e(()=>[t(u,{avatar:""},{default:e(()=>[t(_,{color:l.signerType==="SEED"?"primary":"grey",name:l.signerType==="SEED"?"check_circle":"radio_button_unchecked",onClick:l.handleSeedClick,class:"cursor-pointer"},null,8,["color","name","onClick"])]),_:1}),t(u,{lines:"1",class:"cursor-pointer",style:{"word-break":"break-word"}},{default:e(()=>[t(s,{title:""},{default:e(()=>[n("Wallet seed phrase")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Generate nostr key pair from wallet seed ")]),_:1}),l.signerType==="SEED"&&l.seedSignerPrivateKeyNsec?(r(),f(s,{key:0,caption:""},{default:e(()=>[t(le,{class:"cursor-pointer q-mt-xs",onClick:o[6]||(o[6]=i=>l.copyText(l.seedSignerPrivateKeyNsec)),outline:"",color:"grey"},{default:e(()=>[t(_,{name:"content_copy",size:"0.8em",color:"grey",class:"q-mr-xs"}),n("Copy nsec ")]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1},8,["active"]),y("",!0),t(c,{active:l.signerType==="PRIVATEKEY","active-class":"text-weight-bold text-primary",clickable:""},{default:e(()=>[t(u,{avatar:""},{default:e(()=>[t(_,{color:l.signerType==="PRIVATEKEY"?"primary":"grey",name:l.signerType==="PRIVATEKEY"?"check_circle":"radio_button_unchecked",onClick:l.handleNsecClick,class:"cursor-pointer"},null,8,["color","name","onClick"])]),_:1}),t(u,{lines:"1",class:"cursor-pointer",style:{"word-break":"break-word"}},{default:e(()=>[t(s,{title:""},{default:e(()=>[n("Use your nsec")]),_:1}),t(s,{caption:""},{default:e(()=>[n("This method is dangerous and not recommended ")]),_:1})]),_:1}),l.signerType==="PRIVATEKEY"?(r(),f(u,{key:0,side:""},{default:e(()=>[t(_,{name:"delete_outline",onClick:l.handleResetPrivateKeySigner,class:"cursor-pointer"},{default:e(()=>[t(w,null,{default:e(()=>[n("Delete nsec")]),_:1})]),_:1},8,["onClick"])]),_:1})):y("",!0)]),_:1},8,["active"]),l.nip07SignerAvailable?(r(),f(c,{key:1,active:l.signerType==="NIP07","active-class":"text-weight-bold text-primary",clickable:""},{default:e(()=>[t(u,{avatar:""},{default:e(()=>[t(_,{color:l.signerType==="NIP07"?"primary":"grey",name:l.signerType==="NIP07"?"check_circle":"radio_button_unchecked",onClick:l.handleExtensionClick,class:"cursor-pointer"},null,8,["color","name","onClick"])]),_:1}),t(u,{lines:"1",class:"cursor-pointer",style:{"word-break":"break-word"}},{default:e(()=>[t(s,{title:""},{default:e(()=>[n("Signing extension")]),_:1}),l.nip07SignerAvailable?(r(),f(s,{key:0,caption:""},{default:e(()=>[n("Use a NIP-07 signing extension ")]),_:1})):(r(),f(s,{key:1,caption:""},{default:e(()=>[n("No NIP-07 signing extension found ")]),_:1}))]),_:1})]),_:1},8,["active"])):y("",!0)]),_:1})])):y("",!0),t(c,{class:"q-pt-lg"},{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:"",class:"text-weight-bold"},{default:e(()=>[n("Nostr Wallet Connect (NWC)")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Use NWC to control your wallet from any other application.")]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(B,{modelValue:l.enableNwc,"onUpdate:modelValue":o[7]||(o[7]=i=>l.enableNwc=i),label:"Enable NWC",color:"primary"},null,8,["modelValue"])]),_:1}),l.enableNwc?(r(),f(c,{key:1},{default:e(()=>[t(u,null,{default:e(()=>[t(s,{caption:""},{default:e(()=>[n("You can only use NWC for payments from your Bitcoin balance. Payments will be made from your active mint. ")]),_:1})]),_:1})]),_:1})):y("",!0),l.enableNwc?(r(),S("div",mt,[(r(!0),S(K,null,M(l.connections,i=>(r(),f(c,{key:l.getConnectionString(i)},{default:e(()=>[t(u,{class:"q-mx-none q-pl-none",style:{"max-width":"1.5em"}},{default:e(()=>[t(_,{name:"content_copy",onClick:C=>l.copyText(l.getConnectionString(i)),size:"1.3em",color:"grey",class:"q-mr-sm cursor-pointer"},{default:e(()=>[t(w,null,{default:e(()=>[n("Copy connection string")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),t(u,{class:"q-mx-none q-pl-none",style:{"max-width":"1.5em"}},{default:e(()=>[t(_,{name:"qr_code",onClick:C=>l.showNWCEntry(i),size:"1.3em",color:"grey",class:"q-mr-sm cursor-pointer"},{default:e(()=>[t(w,null,{default:e(()=>[n("Show QR code")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),t(u,{style:{"max-width":"10rem"}},{default:e(()=>[t(Y,{type:"number",outlined:"",rounded:"",dense:"",modelValue:i.allowanceLeft,"onUpdate:modelValue":C=>i.allowanceLeft=C,label:"Allowance left (sat)"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128)),t(F,{dense:"","dense-toggle":"",class:"text-left",label:"Click to edit relays"},{default:e(()=>[t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:""},{default:e(()=>[n("Add relay")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Nostr Wallet Connect uses nostr relays to connect your wallet to other applications. ")]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(Y,{outlined:"",rounded:"",dense:"",modelValue:l.newRelay,"onUpdate:modelValue":o[8]||(o[8]=i=>l.newRelay=i),label:"Relay",append:""},{append:e(()=>[t(p,{flat:"",dense:"",icon:"add",color:"primary",onClick:l.addRelay},null,8,["onClick"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:""},{default:e(()=>[n("Relays")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Your wallet will connect to these relays. ")]),_:1})]),_:1})]),_:1}),(r(!0),S(K,null,M(l.relays,i=>(r(),f(c,{key:i,clickable:""},{default:e(()=>[t(u,{class:"q-mx-none q-pl-none",style:{"max-width":"1.2em"}},{default:e(()=>[t(_,{name:"content_copy",onClick:C=>l.copyText(i),size:"1.1em",color:"grey",class:"q-mr-sm cursor-pointer"},{default:e(()=>[t(w,null,{default:e(()=>[n("Copy relay")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),t(u,{class:"q-mx-none q-pl-none",style:{"max-width":"1.5em"}},{default:e(()=>[t(_,{name:"delete_outline",onClick:C=>l.removeRelay(i),size:"1.3em",color:"grey",class:"q-mr-sm cursor-pointer"},{default:e(()=>[t(w,null,{default:e(()=>[n("Remove relay")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),t(u,{style:{"max-width":"10rem"},class:"cursor-pointer"},{default:e(()=>[t(s,{caption:""},{default:e(()=>[n(A(i),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):y("",!0)]),_:1})]),g("div",pt,[t(D,{padding:""},{default:e(()=>[t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:"",class:"text-weight-bold"},{default:e(()=>[n("Privacy")]),_:1}),t(s,{caption:""},{default:e(()=>[n(" These settings affect your privacy. ")]),_:1})]),_:1})]),_:1}),g("div",null,[t(c,null,{default:e(()=>[t(B,{modelValue:l.checkSentTokens,"onUpdate:modelValue":o[9]||(o[9]=i=>l.checkSentTokens=i),label:"Check sent token state",color:"primary"},null,8,["modelValue"])]),_:1}),t(c,{class:"q-pt-none"},{default:e(()=>[t(s,{caption:""},{default:e(()=>[n("If enabled, the wallet will periodically request the state of tokens you've sent and mark them as paid. You can manually check pending tokens in the history tab. ")]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(B,{modelValue:l.getBitcoinPrice,"onUpdate:modelValue":o[10]||(o[10]=i=>l.getBitcoinPrice=i),label:"Get exchange rate from Coinbase",color:"primary"},null,8,["modelValue"])]),_:1}),t(c,{class:"q-pt-none"},{default:e(()=>[t(s,{caption:""},{default:e(()=>[n("If enabled, the current Bitcoin exchange rate will be fetched from the coinbase.com API and your converted balance will be displayed. ")]),_:1})]),_:1})]),g("div",yt,[t(D,{padding:""},{default:e(()=>[t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:"",class:"text-weight-bold"},{default:e(()=>[n("Appearance")]),_:1}),t(s,{caption:""},{default:e(()=>[n("Change how your wallet looks ")]),_:1}),g("div",gt,[l.themes.includes("monochrome")?(r(),f(p,{key:0,dense:"",flat:"",onClick:o[11]||(o[11]=i=>l.changeColor("monochrome")),icon:"format_color_fill",color:"grey",size:"md"},{default:e(()=>[t(w,null,{default:e(()=>[n("mono")]),_:1})]),_:1})):y("",!0),l.themes.includes("cyber")?(r(),f(p,{key:1,dense:"",flat:"",onClick:o[12]||(o[12]=i=>l.changeColor("cyber")),icon:"format_color_fill",color:"light-green-9",size:"md"},{default:e(()=>[t(w,null,{default:e(()=>[n("cyber")]),_:1})]),_:1})):y("",!0),l.themes.includes("freedom")?(r(),f(p,{key:2,dense:"",flat:"",onClick:o[13]||(o[13]=i=>l.changeColor("freedom")),icon:"format_color_fill",color:"pink-13",size:"md"},{default:e(()=>[t(w,null,{default:e(()=>[n("freedom")]),_:1})]),_:1})):y("",!0),l.themes.includes("classic")?(r(),f(p,{key:3,dense:"",flat:"",onClick:o[14]||(o[14]=i=>l.changeColor("classic")),icon:"format_color_fill",color:"deep-purple",size:"md"},{default:e(()=>[t(w,null,{default:e(()=>[n("nostr")]),_:1})]),_:1})):y("",!0),l.themes.includes("bitcoin")?(r(),f(p,{key:4,dense:"",flat:"",onClick:o[15]||(o[15]=i=>l.changeColor("bitcoin")),icon:"format_color_fill",color:"orange",size:"md"},{default:e(()=>[t(w,null,{default:e(()=>[n("bitcoin")]),_:1})]),_:1})):y("",!0),l.themes.includes("mint")?(r(),f(p,{key:5,dense:"",flat:"",onClick:o[16]||(o[16]=i=>l.changeColor("mint")),icon:"format_color_fill",color:"green",size:"md"},{default:e(()=>[t(w,null,{default:e(()=>[n("mint")]),_:1})]),_:1})):y("",!0),l.themes.includes("autumn")?(r(),f(p,{key:6,dense:"",flat:"",onClick:o[17]||(o[17]=i=>l.changeColor("autumn")),icon:"format_color_fill",color:"brown",size:"md"},{default:e(()=>[t(w,null,{default:e(()=>[n("nut")]),_:1})]),_:1})):y("",!0),l.themes.includes("salvador")?(r(),f(p,{key:7,dense:"",flat:"",onClick:o[18]||(o[18]=i=>l.changeColor("salvador")),icon:"format_color_fill",color:"blue-10",size:"md"},{default:e(()=>[t(w,null,{default:e(()=>[n("blu")]),_:1})]),_:1})):y("",!0),l.themes.includes("flamingo")?(r(),f(p,{key:8,dense:"",flat:"",onClick:o[19]||(o[19]=i=>l.changeColor("flamingo")),icon:"format_color_fill",color:"pink-3",size:"md"},{default:e(()=>[t(w,null,{default:e(()=>[n("flamingo")]),_:1})]),_:1})):y("",!0)])]),_:1})]),_:1})]),_:1})]),t(F,{class:"q-pt-lg",dense:"","dense-toggle":"",icon:"code",label:"Advanced"},{default:e(()=>[g("div",null,[t(c,{class:"q-pt-lg"},{default:e(()=>[t(u,null,{default:e(()=>[t(s,{overline:""},{default:e(()=>[n("Developer settings")]),_:1}),t(s,{caption:""},{default:e(()=>[n("The following settings are for development and debugging.")]),_:1})]),_:1})]),_:1}),g("div",null,[t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[g("div",ht,[l.confirmMnemonic?y("",!0):(r(),S("div",kt,[t(p,{flat:"",dense:"",onClick:o[20]||(o[20]=i=>l.confirmMnemonic=!l.confirmMnemonic)},{default:e(()=>[n("Generate new seed phrase")]),_:1}),t(d,null,{default:e(()=>[t(s,{class:"q-px-sm",caption:""},{default:e(()=>[n("This will generate a new seed phrase. You must send your entire balance to yourself in order to be able to restore it with a new seed. ")]),_:1})]),_:1})])),l.confirmMnemonic?(r(),S("div",vt,[wt,t(p,{flat:"",dense:"",class:"q-ml-sm",color:"warning",onClick:o[21]||(o[21]=i=>l.confirmMnemonic=!1)},{default:e(()=>[n("Cancel")]),_:1}),t(p,{flat:"",dense:"",class:"q-ml-sm",color:"secondary",onClick:o[22]||(o[22]=i=>{l.confirmMnemonic=!1,l.generateNewMnemonic()})},{default:e(()=>[n("Confirm")]),_:1})])):y("",!0)])]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(d,null,{default:e(()=>[t(p,{dense:"",flat:"",outline:"",click:"",onClick:l.checkActiveProofsSpendable},{default:e(()=>[n("Remove spent proofs")]),_:1},8,["onClick"])]),_:1}),t(d,null,{default:e(()=>[t(s,{class:"q-px-sm",caption:""},{default:e(()=>[n("Check if the ecash tokens from your active mints are spent and remove the spent ones from your wallet. Only use this if your wallet is stuck. ")]),_:1})]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(d,null,{default:e(()=>[t(p,{dense:"",flat:"",outline:"",click:"",onClick:l.enable_terminal},{default:e(()=>[n(" Open debug terminal ")]),_:1},8,["onClick"])]),_:1}),t(d,null,{default:e(()=>[t(s,{class:"q-px-sm",caption:""},{default:e(()=>[n("Open the Javascript debug terminal. Never paste anything into this terminal that you don't understand. A thief might try to trick you into pasting malicious code here. ")]),_:1})]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(d,null,{default:e(()=>[t(p,{dense:"",flat:"",outline:"",click:"",onClick:l.exportActiveProofs},{default:e(()=>[n(" Export active proofs ")]),_:1},8,["onClick"])]),_:1}),t(d,null,{default:e(()=>[t(s,{class:"q-px-sm",caption:""},{default:e(()=>[n("Copy your entire balance from the active mint as a Cashu token into your clipboard. This will only export the tokens from the selected mint and unit. For a full export, select a different mint and unit and export again. ")]),_:1})]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(d,null,{default:e(()=>[t(s,{class:"q-pb-sm"},{default:e(()=>[n("Increment keyset counters")]),_:1})]),_:1}),t(d,null,{default:e(()=>[t(s,{class:"q-px-sm",caption:""},{default:e(()=>[n('Click the keyset ID to increment the derivation path counters for the keysets in your wallet. This is useful if you see the "outputs have already been signed" error. ')]),_:1})]),_:1}),t(d,{class:"q-pa-sm"},{default:e(()=>[(r(!0),S(K,null,M(l.keysetCountersByMint,(i,C)=>(r(),f(d,{class:"q-px-sm",key:C},{default:e(()=>[t(s,{class:"q-px-xs",caption:""},{default:e(()=>[n(A(l.shortUrl(C)),1)]),_:2},1024),(r(!0),S(K,null,M(i,(W,$)=>(r(),f(p,{dense:"",key:$,flat:"",click:"",onClick:U=>l.increaseKeysetCounter(W.id,1)},{default:e(()=>[n(A(W.id)+" - counter: "+A(W.counter),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(d,null,{default:e(()=>[t(p,{dense:"",flat:"",outline:"",click:"",onClick:l.unsetAllReservedProofs},{default:e(()=>[n(" Unset all reserved tokens ")]),_:1},8,["onClick"])]),_:1}),t(d,null,{default:e(()=>[t(s,{class:"q-px-sm",caption:""},{default:e(()=>[n(`To avoid double-spending attempts, this wallet marks ecash as reserved so you don't reuse it. This button will unset all reserved tokens so they can be used again. If you do this, your wallet might include spent proofs. Press the "Remove spent proofs" button to get rid of them. `)]),_:1})]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(d,null,{default:e(()=>[l.confirmNuke?y("",!0):(r(),f(p,{key:0,dense:"",flat:"",outline:"",click:"",onClick:o[23]||(o[23]=i=>l.confirmNuke=!l.confirmNuke)},{default:e(()=>[n(" Reset wallet data ")]),_:1}))]),_:1}),l.confirmNuke?y("",!0):(r(),f(d,{key:0},{default:e(()=>[t(s,{class:"q-px-sm",caption:""},{default:e(()=>[n("Reset your wallet data. Warning: This will delete everything! Make sure you create a backup first. ")]),_:1})]),_:1})),l.confirmNuke?(r(),f(d,{key:1},{default:e(()=>[Ct,t(p,{flat:"",dense:"",class:"q-ml-sm",color:"primary",onClick:o[24]||(o[24]=i=>l.confirmNuke=!1)},{default:e(()=>[n("Cancel")]),_:1}),t(p,{flat:"",dense:"",class:"q-ml-sm",color:"warning",onClick:o[25]||(o[25]=i=>{l.confirmNuke=!1,l.nukeWallet()})},{default:e(()=>[n("Delete wallet")]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(u,null,{default:e(()=>[t(d,null,{default:e(()=>[t(p,{dense:"",flat:"",outline:"",click:"",onClick:l.getLocalstorageToFile},{default:e(()=>[n(" Export wallet data ")]),_:1},8,["onClick"])]),_:1}),t(d,null,{default:e(()=>[t(s,{class:"q-px-sm",caption:""},{default:e(()=>[n("Download a dump of your wallet. You can restore your wallet from this file in the welcome screen of a new wallet. This file will be out of sync if you keep using your wallet after exporting it. ")]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})])]),t(V,{modelValue:l.showP2PKDialog,"onUpdate:modelValue":o[26]||(o[26]=i=>l.showP2PKDialog=i)},null,8,["modelValue"]),t(N,{modelValue:l.showNWCDialog,"onUpdate:modelValue":o[27]||(o[27]=i=>l.showNWCDialog=i)},null,8,["modelValue"])],64)}var bt=X(et,[["render",_t]]);const Nt=Z({name:"ErrorNotFound",components:{SettingsView:bt}}),St={class:"bg-dark text-white text-center q-pa-md flex flex-center"};function qt(l,o,a,v,h,k){const d=Q("SettingsView");return r(),S("div",St,[t(d)])}var Et=X(Nt,[["render",qt]]);export{Et as default};
